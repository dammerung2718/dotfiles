#!/bin/sh
set -e # Stop on error

# kur
if test ! -d $HOME/.cargo; then
  curl -sSf https://sh.rustup.rs | sh -s -- -y
fi
. "$HOME/.cargo/env"
rustup component add rust-analyzer
command -v kur >/dev/null || cargo install kur
kur fmt
kur sync

# symlinks
symlnk() {
  if test -L $2; then
    return
  fi

  if test -d $2; then
    rm -rf $2
  fi

  ln -sf $1 $2
}

symlnk $(pwd)/dot_shrc $HOME/.zshrc
symlnk $(pwd)/dot_config $HOME/.config
symlnk $(pwd)/dot_vimrc $HOME/.vimrc
symlnk $(pwd)/dot_xinitrc $HOME/.xinitrc
